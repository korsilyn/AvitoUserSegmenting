# AvitoUserSegmenting

## Вопросы
1. Встал вопрос о хранении пользователей без сегментов. Подумал и решил, что
стоит просто не хранить id пользователей, у которых нет активных сегментов, и если
будет запрос на сегменты, то идти по логике: пользователь есть в бд? ? отдаем сегменты 
: отдаем nil. Если у пользователя после удаления остается 0 сегментов, то просто сносим ряд. 
New. Обнаружил проблему - надо хранить время удаления сегмента, снести ряд полностью не получится.  
2. Доп задание 3. "10% пользователей попадают в сегмент". Нет указания на то, откуда брать
id пользователей и общее количество пользователей. Для данного задания решил сделать возможные 
id от 1000 до 1099 (100 юзеров). По хорошему, на проде забирать эти данные с основной БД или 
придумать что нибудь похожее.  
3. В задании написано, что добавление и удаление должно обрабатываться одним методом, но я посчитал, 
что будет удобнее иметь в API метод /add и /remove, чем 1 большой метод /change.  
4. Возник вопрос - хранить строку со slug'ами в табличке user, или создать отдельную табличку. 
Решил сделать в отдельной таблице, потому что так проще вывести потом csv таблицу и записи точно не 
потеряются.  
5. Возник вопрос по доп заданию 3. Если пользователя закинули вручную в slug, а потом он выпал 
в те 10%, считать ли его как входящего, или искать нового? Пока решил оставить, как считать.
6. Если пользователю второй раз добавили сегмент, нужно ли обновлять время добавления? 
Я решил не обновлять.
7. Доп задание 2. В чем получать TTL и как его хранить? Я решил сразу объединить 2 и 3 
допы, и сразу заносить TTL в поле removed_at. При получении списка пользователей появилась 
доп проверка. Как отправлять запрос на TTL - пока не знаю.
